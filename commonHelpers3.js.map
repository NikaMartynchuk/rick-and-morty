{"version":3,"file":"commonHelpers3.js","sources":["../src/js/main-characters.js","../src/js/fixed-button.js"],"sourcesContent":["const characterImg = document.getElementById(\"character-img\");\nconst characterTitles = document.querySelectorAll(\".character-info h3\");\n\ncharacterImg.src = \"\";\n\ncharacterTitles.forEach((title) => {\n  title.addEventListener(\"click\", () => {\n    characterTitles.forEach((el) => el.classList.remove(\"active\"));\n    title.classList.add(\"active\");\n\n    const newImg = title.getAttribute(\"data-img\");\n\n    characterImg.classList.remove(\"active\");\n    characterImg.style.opacity = 0;\n    characterImg.style.transform = \"translateY(40px)\";\n\n    setTimeout(() => {\n      characterImg.src = newImg;\n      characterImg.classList.add(\"active\");\n    }, 200);\n  });\n});\n","const btn = document.getElementById(\"scrollBtn\");\nconst icon = document.getElementById(\"arrowIcon\");\nconst target = document.getElementById(\"exploreSection\");\n\nfunction findNonTransparentBgColor(el) {\n  let cur = el;\n  while (cur && cur !== document.documentElement) {\n    const style = window.getComputedStyle(cur);\n    const bg = style.backgroundColor;\n    if (bg && bg !== \"transparent\" && bg !== \"rgba(0, 0, 0, 0)\") {\n      return bg;\n    }\n    cur = cur.parentElement;\n  }\n  const bodyBg = window.getComputedStyle(document.body).backgroundColor;\n  return bodyBg || \"rgb(255,255,255)\";\n}\n\nfunction parseRGB(bg) {\n  const m = bg.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)/);\n  if (!m) return [255,255,255];\n  return [Number(m[1]), Number(m[2]), Number(m[3])];\n}\n\nfunction luminanceFromRGB(rgb) {\n  const srgb = rgb.map(v => v / 255);\n  const lin = srgb.map(c => {\n    if (c <= 0.03928) return c / 12.92;\n    return Math.pow((c + 0.055) / 1.055, 2.4);\n  });\n  return 0.2126 * lin[0] + 0.7152 * lin[1] + 0.0722 * lin[2];\n}\n\nconst LUMINANCE_THRESHOLD = 0.5;\n\nfunction updateArrowAndColor() {\n  if (!target) return;\n  const y = window.scrollY;\n  const sectionTop = target.offsetTop;\n  const sectionBottom = sectionTop + target.offsetHeight;\n\n  \n  if (y < sectionTop - 50) {\n    icon.style.transform = \"rotate(0deg)\";   \n  } else if (y >= sectionTop - 50 && y <= sectionBottom - 50) {\n    icon.style.transform = \"rotate(-540deg)\";  \n  } else {\n    icon.style.transform = \"rotate(180deg)\"; \n  }\n\n  const probeX = window.innerWidth - 40;\n  const probeY = window.innerHeight - 40;\n  let el = document.elementFromPoint(probeX, probeY);\n\n  if (!el) el = document.body;\n\n  const bg = findNonTransparentBgColor(el);\n  const rgb = parseRGB(bg);\n  const lum = luminanceFromRGB(rgb);\n\n  if (lum < LUMINANCE_THRESHOLD) {\n    btn.classList.add(\"light\");\n    btn.classList.remove(\"dark\");\n  } else {\n    btn.classList.add(\"dark\");\n    btn.classList.remove(\"light\");\n  }\n}\n\nbtn.addEventListener(\"click\", () => {\n  const y = window.scrollY;\n  const sectionTop = target ? target.offsetTop : 0;\n\n  if (y < sectionTop - 50) {\n    window.scrollTo({ top: sectionTop, behavior: \"smooth\" });\n  } else {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }\n});\n\nwindow.addEventListener(\"scroll\", updateArrowAndColor, { passive: true });\nwindow.addEventListener(\"resize\", updateArrowAndColor);\n\nupdateArrowAndColor();\n"],"names":["characterImg","characterTitles","title","el","newImg","btn","icon","target","findNonTransparentBgColor","cur","bg","parseRGB","m","luminanceFromRGB","rgb","lin","v","c","LUMINANCE_THRESHOLD","updateArrowAndColor","y","sectionTop","sectionBottom","probeX","probeY"],"mappings":"kFAAA,MAAMA,EAAe,SAAS,eAAe,eAAe,EACtDC,EAAkB,SAAS,iBAAiB,oBAAoB,EAEtED,EAAa,IAAM,GAEnBC,EAAgB,QAASC,GAAU,CACjCA,EAAM,iBAAiB,QAAS,IAAM,CACpCD,EAAgB,QAASE,GAAOA,EAAG,UAAU,OAAO,QAAQ,CAAC,EAC7DD,EAAM,UAAU,IAAI,QAAQ,EAE5B,MAAME,EAASF,EAAM,aAAa,UAAU,EAE5CF,EAAa,UAAU,OAAO,QAAQ,EACtCA,EAAa,MAAM,QAAU,EAC7BA,EAAa,MAAM,UAAY,mBAE/B,WAAW,IAAM,CACfA,EAAa,IAAMI,EACnBJ,EAAa,UAAU,IAAI,QAAQ,CACpC,EAAE,GAAG,CACV,CAAG,CACH,CAAC,ECrBD,MAAMK,EAAM,SAAS,eAAe,WAAW,EACzCC,EAAO,SAAS,eAAe,WAAW,EAC1CC,EAAS,SAAS,eAAe,gBAAgB,EAEvD,SAASC,EAA0BL,EAAI,CACrC,IAAIM,EAAMN,EACV,KAAOM,GAAOA,IAAQ,SAAS,iBAAiB,CAE9C,MAAMC,EADQ,OAAO,iBAAiBD,CAAG,EACxB,gBACjB,GAAIC,GAAMA,IAAO,eAAiBA,IAAO,mBACvC,OAAOA,EAETD,EAAMA,EAAI,aACX,CAED,OADe,OAAO,iBAAiB,SAAS,IAAI,EAAE,iBACrC,kBACnB,CAEA,SAASE,EAASD,EAAI,CACpB,MAAME,EAAIF,EAAG,MAAM,gCAAgC,EACnD,OAAKE,EACE,CAAC,OAAOA,EAAE,CAAC,CAAC,EAAG,OAAOA,EAAE,CAAC,CAAC,EAAG,OAAOA,EAAE,CAAC,CAAC,CAAC,EADjC,CAAC,IAAI,IAAI,GAAG,CAE7B,CAEA,SAASC,EAAiBC,EAAK,CAE7B,MAAMC,EADOD,EAAI,IAAIE,GAAKA,EAAI,GAAG,EAChB,IAAIC,GACfA,GAAK,OAAgBA,EAAI,MACtB,KAAK,KAAKA,EAAI,MAAS,MAAO,GAAG,CACzC,EACD,MAAO,OAASF,EAAI,CAAC,EAAI,MAASA,EAAI,CAAC,EAAI,MAASA,EAAI,CAAC,CAC3D,CAEA,MAAMG,EAAsB,GAE5B,SAASC,GAAsB,CAC7B,GAAI,CAACZ,EAAQ,OACb,MAAMa,EAAI,OAAO,QACXC,EAAad,EAAO,UACpBe,EAAgBD,EAAad,EAAO,aAGtCa,EAAIC,EAAa,GACnBf,EAAK,MAAM,UAAY,eACdc,GAAKC,EAAa,IAAMD,GAAKE,EAAgB,GACtDhB,EAAK,MAAM,UAAY,kBAEvBA,EAAK,MAAM,UAAY,iBAGzB,MAAMiB,EAAS,OAAO,WAAa,GAC7BC,EAAS,OAAO,YAAc,GACpC,IAAIrB,EAAK,SAAS,iBAAiBoB,EAAQC,CAAM,EAE5CrB,IAAIA,EAAK,SAAS,MAEvB,MAAMO,EAAKF,EAA0BL,CAAE,EACjCW,EAAMH,EAASD,CAAE,EACXG,EAAiBC,CAAG,EAEtBI,GACRb,EAAI,UAAU,IAAI,OAAO,EACzBA,EAAI,UAAU,OAAO,MAAM,IAE3BA,EAAI,UAAU,IAAI,MAAM,EACxBA,EAAI,UAAU,OAAO,OAAO,EAEhC,CAEAA,EAAI,iBAAiB,QAAS,IAAM,CAClC,MAAMe,EAAI,OAAO,QACXC,EAAad,EAASA,EAAO,UAAY,EAE3Ca,EAAIC,EAAa,GACnB,OAAO,SAAS,CAAE,IAAKA,EAAY,SAAU,QAAQ,CAAE,EAEvD,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAQ,CAAE,CAElD,CAAC,EAED,OAAO,iBAAiB,SAAUF,EAAqB,CAAE,QAAS,EAAI,CAAE,EACxE,OAAO,iBAAiB,SAAUA,CAAmB,EAErDA,EAAqB"}