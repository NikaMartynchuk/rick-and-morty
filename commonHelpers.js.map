{"version":3,"file":"commonHelpers.js","sources":["../src/js/characters.js"],"sourcesContent":["import { getCharacters } from \"./API.js\";  \n\nconst characterList = document.getElementById('character-list');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst nameInput = document.querySelector('.character-input');\nconst selects = document.querySelectorAll('.character-filtration select');\n\nlet currentPage = 1;\nlet isLoading = false;\nlet currentFilters = {}; \n\n\nfunction renderCharacters(characters, reset = false) {\n  if (reset) characterList.innerHTML = '';\n\n  if (!characters || characters.length === 0) {\n    characterList.innerHTML = '<li>No characters found.</li>';\n    loadMoreBtn.style.display = 'none';\n    return;\n  }\n\n \n  const characterHTML = characters.map(character => `\n    <li>\n      <img class=\"character__img-list\" src=\"${character.image}\" alt=\"${character.name}\">\n      <h2 class=\"character__name\">${character.name}</h2>\n      <h3 class=\"character__info character__origin\">\n        <span class=\"character__span\">Origin:</span> ${character.origin.name}\n      </h3>\n      <h3 class=\"character__info character__location\">\n        <span class=\"character__span\">Location:</span> ${character.location.name}\n      </h3>\n    </li>\n  `).join('');\n\n  characterList.innerHTML += characterHTML;\n}\n\n\nasync function loadCharacters(page = 1, filters = {}, reset = false) {\n  if (isLoading) return;\n  isLoading = true;\n  loadMoreBtn.disabled = true;\n\n  try {\n    const data = await getCharacters(page, filters);\n    renderCharacters(data.results, reset);\n\n \n    loadMoreBtn.style.display = data.info?.next ? 'block' : 'none';\n  } catch (error) {\n    console.error('Error loading characters:', error);\n    characterList.innerHTML = '<li>No characters found.</li>';\n    loadMoreBtn.style.display = 'none';\n  } finally {\n    isLoading = false;\n    loadMoreBtn.disabled = false;\n  }\n}\n\n\nfunction getFilterValues() {\n  const filters = {\n    name: nameInput.value.trim(),\n    status: '',\n    species: '',\n    type: '',\n    gender: ''\n  };\n\n  selects.forEach(select => {\n    const labelText = select.previousElementSibling.textContent.toLowerCase().trim();\n    const val = select.value.trim();\n\n    if (labelText.includes('status')) filters.status = val;\n    if (labelText.includes('species')) filters.species = val;\n    if (labelText.includes('type')) filters.type = val;\n    if (labelText.includes('gender')) filters.gender = val;\n  });\n\n  return filters;\n}\n\n\nfunction updateCharacters() {\n  currentPage = 1;\n  currentFilters = getFilterValues();\n  console.log('Фільтри:', currentFilters); \n  loadCharacters(currentPage, currentFilters, true);\n}\n\n\nloadCharacters(currentPage);\n\n\nloadMoreBtn.addEventListener('click', () => {\n  currentPage++;\n  loadCharacters(currentPage, currentFilters);\n});\n\n\nnameInput.addEventListener('input', updateCharacters);\nselects.forEach(select => select.addEventListener('change', updateCharacters));\n"],"names":["characterList","loadMoreBtn","nameInput","selects","currentPage","isLoading","currentFilters","renderCharacters","characters","reset","characterHTML","character","loadCharacters","page","filters","data","getCharacters","_a","error","getFilterValues","select","labelText","val","updateCharacters"],"mappings":"2IAEA,MAAMA,EAAgB,SAAS,eAAe,gBAAgB,EACxDC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAU,SAAS,iBAAiB,8BAA8B,EAExE,IAAIC,EAAc,EACdC,EAAY,GACZC,EAAiB,CAAA,EAGrB,SAASC,EAAiBC,EAAYC,EAAQ,GAAO,CAGnD,GAFIA,IAAOT,EAAc,UAAY,IAEjC,CAACQ,GAAcA,EAAW,SAAW,EAAG,CAC1CR,EAAc,UAAY,gCAC1BC,EAAY,MAAM,QAAU,OAC5B,MACD,CAGD,MAAMS,EAAgBF,EAAW,IAAIG,GAAa;AAAA;AAAA,8CAENA,EAAU,KAAK,UAAUA,EAAU,IAAI;AAAA,oCACjDA,EAAU,IAAI;AAAA;AAAA,uDAEKA,EAAU,OAAO,IAAI;AAAA;AAAA;AAAA,yDAGnBA,EAAU,SAAS,IAAI;AAAA;AAAA;AAAA,GAG7E,EAAE,KAAK,EAAE,EAEVX,EAAc,WAAaU,CAC7B,CAGA,eAAeE,EAAeC,EAAO,EAAGC,EAAU,CAAE,EAAEL,EAAQ,GAAO,OACnE,GAAI,CAAAJ,EACJ,CAAAA,EAAY,GACZJ,EAAY,SAAW,GAEvB,GAAI,CACF,MAAMc,EAAO,MAAMC,EAAcH,EAAMC,CAAO,EAC9CP,EAAiBQ,EAAK,QAASN,CAAK,EAGpCR,EAAY,MAAM,SAAUgB,EAAAF,EAAK,OAAL,MAAAE,EAAW,KAAO,QAAU,MACzD,OAAQC,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChDlB,EAAc,UAAY,gCAC1BC,EAAY,MAAM,QAAU,MAChC,QAAY,CACRI,EAAY,GACZJ,EAAY,SAAW,EACxB,EACH,CAGA,SAASkB,GAAkB,CACzB,MAAML,EAAU,CACd,KAAMZ,EAAU,MAAM,KAAM,EAC5B,OAAQ,GACR,QAAS,GACT,KAAM,GACN,OAAQ,EACZ,EAEE,OAAAC,EAAQ,QAAQiB,GAAU,CACxB,MAAMC,EAAYD,EAAO,uBAAuB,YAAY,YAAW,EAAG,OACpEE,EAAMF,EAAO,MAAM,KAAI,EAEzBC,EAAU,SAAS,QAAQ,IAAGP,EAAQ,OAASQ,GAC/CD,EAAU,SAAS,SAAS,IAAGP,EAAQ,QAAUQ,GACjDD,EAAU,SAAS,MAAM,IAAGP,EAAQ,KAAOQ,GAC3CD,EAAU,SAAS,QAAQ,IAAGP,EAAQ,OAASQ,EACvD,CAAG,EAEMR,CACT,CAGA,SAASS,GAAmB,CAC1BnB,EAAc,EACdE,EAAiBa,EAAe,EAChC,QAAQ,IAAI,WAAYb,CAAc,EACtCM,EAAeR,EAAaE,EAAgB,EAAI,CAClD,CAGAM,EAAeR,CAAW,EAG1BH,EAAY,iBAAiB,QAAS,IAAM,CAC1CG,IACAQ,EAAeR,EAAaE,CAAc,CAC5C,CAAC,EAGDJ,EAAU,iBAAiB,QAASqB,CAAgB,EACpDpB,EAAQ,QAAQiB,GAAUA,EAAO,iBAAiB,SAAUG,CAAgB,CAAC"}